<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ManagerDAO">
	<insert id="insertManager" parameterType="ManagerVO">
		INSERT INTO MANAGER(
							MANAGER_ID
							, MANAGER_PASSWORD
							, MANAGER_NAME)
		VALUES	(#{managerId}
				,#{managerPassword}
				,#{managerName})
	</insert>
	
	<select id="getManager" resultType="ManagerVO">
		SELECT 
				  MANAGER_ID
				, MANAGER_PASSWORD
				, MANAGER_NAME
		FROM MANAGER		
		WHERE MANAGER_ID = #{managerId}
	
	</select>
	
	<select id="getManagerList" resultType="ManagerVO">
		SELECT 
				  MANAGER_ID
				, MANAGER_PASSWORD
				, MANAGER_NAME
		FROM MANAGER		
	
	</select>
	
	<select id="managerLogin" resultType="ManagerVO">
		SELECT 
				  MANAGER_ID
				, MANAGER_PASSWORD
				, MANAGER_NAME
		FROM MANAGER		
		WHERE MANAGER_ID = #{managerId} AND MANAGER_PASSWORD = #{managerPassword}
	
	</select>
	
	<update id="updateManager" parameterType="ManagerVO">
		UPDATE MANAGER
		<set>
			<if test="managerPassword != null"> MANAGER_PASSWORD = #{managerPassword} ,</if>
			<if test="managerName != null"> MANAGER_NAME = #{managerName} </if>
		</set>
		WHERE MANAGER_ID = #{managerId}
	</update>

	<delete id="deleteManager" parameterType="ManagerVO">
		DELETE FROM MANAGER
		<where>
			<choose>
				<when test="mngList != null and mngList.length>0">
					MANAGER_ID in
					<foreach collection="mngList"
							 open="(" close=")" separator=","
							 item="item">
							 #{item}
					</foreach>
				</when>
				<otherwise>
					MANAGER_ID = #{managerId}
				</otherwise>
			</choose>
		</where>
	</delete>
	
	<!-- 7/5 재용 추가 -->
	<select id="getManagerUserAccountView" parameterType="ManagerTakerVO" resultType="ManagerTakerVO">
		SELECT 	TAKER_ID,
				TAKER_NAME,
				TAKER_INFO,
				TAKER_EDUCATION,
				TAKER_EMAIL,
				TAKER_PASSWORD
		FROM	TAKER
		WHERE	TAKER_ID = #{takerId}
	</select>
	
	<!-- 기업 목록 조회 -->
	<select id="getCompanyList" resultType="CompanyVO">
		SELECT COMPANY_ID
			,COMPANY_NAME
			,COMPANY_MANAGER
		FROM COMPANY			
	</select>
	
		<!-- 관리자 회사 등록 -->
		<insert id="managerAccountInsert" parameterType="CompanyVO">
			INSERT INTO COMPANY (
								COMPANY_ID
								, COMPANY_PASSWORD
								, COMPANY_NAME
								, BUSINESS_NUMBER
								, COMPANY_CLASSIFICATION
								, COMPANY_SECTORS
								, COMPANY_CREDIT
								, COMPANY_MANAGER
								, COMPANY_MANAGER_TELNUM )
								
			VALUES ( #{companyId}
						,#{companyPassword}
						,#{companyName}
						,#{businessNumber}
						,#{companyClassification}
						,#{companySectors}
						,#{companyCredit}
						,#{companyManager}
						,#{companyManagerTelNum})
		</insert>
		
		<!-- 0708 이승환 추가  // 기업리스트 출력 -->
	<select id="managerAccountList" resultType="CompanyVO">
		SELECT 
			COMPANY_ID
			,COMPANY_NAME
			,COMPANY_PASSWORD
			,COMPANY_CLASSIFICATION
			,COMPANY_MANAGER
			,COMPANY_MANAGER_TELNUM
		FROM COMPANY
	</select>
	
	<!-- 0708 이승환 추가  // 매니저 기업 수정-->
	<update id="managerAccountManage" parameterType="CompanyVO">
		UPDATE COMPANY
		<set>
			<if test="companyId != null and companyId != '' ">
				COMPANY_ID = #{companyId},
			</if>
			<if test="companyPassword != null and companyPassword != '' ">
				COMPANY_PASSWORD = #{companyPassword},
			</if>
			<if test="companyName != null and companyName != '' ">
				COMPANY_NAME = #{companyName},
			</if>
			<if test="businessNumber != null and businessNumber != '' ">
				BUSINESS_NUMBER = #{businessNumber},
			</if>
			<if test="companyClassification != null and companyClassification != '' "> 
				COMPANY_CLASSIFICATION = #{companyClassification},
			</if>
			<if test="companySectors != null and companySectors != '' "> 
				COMPANY_SECTORS = #{companySectors},
			</if>
			<if test="companyCredit != null and companyCredit != '' "> 
				COMPANY_CREDIT = #{companyCredit},
			</if>
			<if test="companyManager != null and companyManager != '' ">
				COMPANY_MANAGER = #{companyManager},
			</if>
			<if test="companyManagerTelNum != null and companyManagerTelNum != '' ">
				COMPANY_MANAGER_TELNUM = #{companyManagerTelNum}
			</if>
		</set>
		WHERE COMPANY_ID = #{companyId}	
	</update>
	
	<!-- 응시자 목록 조회 -->
	<select id="getCandidateList" resultType="CandidateVO">
		SELECT    TAKER_ID
				, TAKER_NAME
				, TAKER_EMAIL
		FROM TAKER
	</select>
	
	<!-- 응시자 목록 상세조회 -->
	
	<!-- 관리자 응시자 추가 -->
	<insert id="managerUserInsert" parameterType="CandidateVO">
		INSERT INTO TAKER (TAKER_ID
							, TAKER_NAME
							, TAKER_INFO
							, TAKER_EDUCATION
							, TAKER_EMAIL
							, TAKER_PHONENUM)
		VALUES( #{takerId}
				 ,#{takerName}
				 ,#{takerInfo}
				 ,#{takerEducation}
 				 ,#{takerEmail}
 				 ,#{takerPhoneNum})
		
		</insert>
	
</mapper>